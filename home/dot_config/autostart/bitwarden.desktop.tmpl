{{- $hasBitwardenBin := lookPath "/opt/Bitwarden/bitwarden-app" -}}
{{- $hasBitwardenDesktop := lookPath "bitwarden-desktop" -}}
{{- if and .personal (or $hasBitwardenBin $hasBitwardenDesktop) }}
{{- $pkg := "bitwarden-bin" -}}
{{- $exec := "/opt/Bitwarden/bitwarden-app" -}}
{{- if $hasBitwardenDesktop -}}
{{- $pkg = "bitwarden" -}}
{{- $exec = "bitwarden-desktop" -}}
{{- end }}

[Desktop Entry]
Type=Application
Version={{ output "sh" "-c" (printf "pacman -Q %s | awk '{print $2}' | cut -d'-' -f1" $pkg) | trim }}
Name=Bitwarden
Comment=Bitwarden startup script
Exec={{ $exec }}
StartupNotify=false
Terminal=false
{{- end -}}
