{{- $personal := false -}} {{/* true if this machine should have personal secrets */}}
{{- if eq .chezmoi.username "vantesh" -}} {{- $personal = true -}} {{- end -}}

data:
  {{- if not $personal }}
  git_username: {{ promptString "Enter your Git username:" | quote }}
  git_email: {{ promptString "Enter your Git email:" | quote }}
  {{- end }}
  default_shell: {{ promptChoice "What's your preferred shell?" (list "fish" "zsh") | quote }}
  compositor: {{ promptChoice "What's your preferred compositor?" (list "hyprland" "niri") | quote }}
  personal: {{ $personal }}
  distro: {{ if .chezmoi.osRelease }}{{ .chezmoi.osRelease.id | quote }}{{ else }}{{ .chezmoi.os | quote }}{{ end }}

edit:
  command: "code"
  args: ["--wait"]

merge:
  command: "bash"
  args:
    - "-c"
    - "cp {{ "{{" }} .Target {{ "}}" }} {{ "{{" }} .Target {{ "}}" }}.base && code --new-window --wait --merge {{ "{{" }} .Destination {{ "}}" }} {{ "{{" }} .Target {{ "}}" }} {{ "{{" }} .Target {{ "}}" }}.base {{ "{{" }} .Source {{ "}}" }}"

diff:
  command: "delta"
  args:
    - "--paging=never"
    - "{{ "{{ .Destination }}" }}"
    - "{{ "{{ .Target }}" }}"
  pager: "delta"
  exclude:
    - "scripts"

{{/* bw cli for secrets */}}
bitwarden:
  unlock: auto
  command: "{{ .chezmoi.homeDir }}/.local/bin/bw"

github: {{/* api refresh */}}
  refreshPeriod: 12h
